function oldIESearch(){var a=$("html").hasClass("lte-ie9");a&&($("#resources, .wrap-select--resources .selected").remove(),$(".wrap-select--resources").append('<select id="resources-select"></select'),$("#resources-select").append('<option value="option-1">Articles, e-books, &amp; more</option>').append('<option value="option-2">E-Journals &amp; databases</option>').append('<option value="option-3">Books &amp; more at MIT</option>').append('<option value="option-4">Books &amp; more worldwide</option>').append('<option value="option-5">Course Reserves</option>').append('<option value="option-6">Site Search</option>'),$("#resources-select").change(function(){$("#search-main form").removeClass("input-submit active"),$("#search-main input").removeClass("active");var a=$("#resources-select option:selected").val();$("#search-main input."+a).parent().addClass("active input-submit"),$("#search-main input."+a).addClass("active"),$(".keywords").parent().removeClass("active"),$(".keywords").removeClass("active"),$("#search-main .keywords."+a).addClass("active"),$("#search-main .keywords."+a).parent().addClass("active");var b=$("#resources li.active").attr("data-target");$("#search-main a.search-advanced").removeClass("active"),$("#search-main a.search-advanced."+b).addClass("active")}))}function InitAnalytics(){if($("html").hasClass("lte-ie9")){var a=$("#resources-select option:selected");TrackEvent("Discovery","Initial Tab",a,1),$("#resources-select").change(function(){var a=$("#resources-select option:selected").val();switch(a){case"option-1":a="Articles, e-books, & more",intValue=1;break;case"option-2":a="E-journals & databases",intValue=2;break;case"option-3":a="Books & more at MIT",intValue=3;break;case"option-4":a="Books & more worldwide",intValue=4;break;case"option-5":a="Course reserves",intValue=5;break;case"option-6":a="Site search",intValue=6;break;default:a="Unknown option",intValue=7}TrackEvent("Discovery","Tab",a,intValue)})}else{var a=$("#resources li").attr("data-target");TrackEvent("Discovery","Initial Tab",a,1),$("#resources").on("option-change",function(){var a=$("#resources li.active").attr("data-target");switch(a){case"bartonplus":a="Articles, e-books, & more",intValue=1;break;case"vera":a="E-journals & databases",intValue=2;break;case"barton":a="Books & more at MIT",intValue=3;break;case"worldcat":a="Books & more worldwide",intValue=4;break;case"course-reserves":a="Course reserves",intValue=5;break;case"site-search":a="Site search",intValue=6;break;default:a="Unknown option",intValue=7}TrackEvent("Discovery","Tab",a,intValue)})}$("#search-main form").on("submit",function(){var a,b,c,d;switch(c=-1,a=$(this).attr("id")){case"bartonplus":switch(c=100,b=$("#search-main input.active").val(),d=$("#search-main select.active option:selected").val()){case"TI ":c=106,b="a2_"+b;break;case"AU ":c=115,b="a3_"+b;break;default:c=101,b="a1_"+b}break;case"vera":switch(b=$("#search-main input.active").val(),c=200,d=$('#search-main form.active input[name="param_textSearchType_value"]:checked').val()){case"contains":c=201,b="b1_ "+b;break;case"startsWith":c=208,b="b2_ "+b;break;case"exactMatch":c=216,b="b3_ "+b;break;default:c=200}break;case"barton":switch(b=$("#search-main input.active").val(),c=300,d=$('#search-main form.active input[name="code"]:checked').val()){case"scan_TTL":c=310,b="c2_ "+b;break;case"scan_AUT":c=320,b="c3_ "+b;break;case"scan_CND":c=331,b="c4_ "+b;break;default:c=301,b="c1_ "+b}break;case"worldcat":switch(b=$("#search-main input.active").val(),c=300,d=$("#search-main select.active option:selected").val()){case"author":c=353,b="c6_ "+b;break;case"title":c=363,b="c7_ "+b;break;default:c=343,b="c5_"+b}break;case"course-reserves":switch(b=$("#search-main input.active").val(),c=400,d=$('#search-main form.active input[name="code"]:checked').val()){case"find_WIN":c=414,b="d2_ "+b;break;case"find_WOU":c=428,b="d3_ "+b;break;default:c=401,b="d1_ "+b}break;case"site-search":b=$("#search-main input.active").val(),c=501,b="f1_"+b}TrackEvent("Discovery","Search",b,c)})}function TrackEvent(a,b,c,d){_gaq.push(["_trackEvent",a,b,c,d])}function showSubmitted(a){$("form#"+a+" :input").each(function(a,b){alert(a+" | "+b.name+" | "+b.value)})}$(function(){function a(){var a=$("#search-main select.active option:selected").val();$("#bartonplus.active").length&&(""==a&&$("input.active").attr("placeholder","ex: carbon nanotubes"),"TI "==a&&$("input.active").attr("placeholder","ex: freakonomics"),"AU "==a&&$("input.active").attr("placeholder","ex: noam chomsky")),$("#vera.active").length&&("contains"==a&&$("input.active").attr("placeholder","ex: new eng j of med"),"startsWith"==a&&$("input.active").attr("placeholder","ex: journal of cell biology"),"exactMatch"==a&&$("input.active").attr("placeholder","ex: web of science")),$("#barton.active").length&&("find_WRD"==a&&$("input.active").attr("placeholder","ex: game design"),"scan_TTL"==a&&$("input.active").attr("placeholder","ex: introduction to fluid mechanics"),"scan_AUT"==a&&$("input.active").attr("placeholder","ex: shakespeare william"),"scan_CND"==a&&$("input.active").attr("placeholder","ex: ta405.t5854")),$("#worldcat.active").length&&("keyword"==a&&$("input.active").attr("placeholder","ex: carbon nanotubes"),"author"==a&&$("input.active").attr("placeholder","ex: william shakespeare"),"title"==a&&$("input.active").attr("placeholder","ex: introduction to fluid mechanics")),$("#course-reserves.active").length&&("scan_CNB"==a&&$("input.active").attr("placeholder","ex: 21F.108"),"find_WIN"==a&&$("input.active").attr("placeholder","ex: cohen"),"find_WOU"==a&&$("input.active").attr("placeholder","ex: introduction chemistry"))}function b(){$("#search-main select.active option:selected").val();$("#search-main select.active").change(function(){$("#search-main select.active option:selected").val();a()})}function c(){var a=$("#search-main select.active").val();$("#search-main form .hidden-fields").html(""),$("#bartonplus.active").length&&$("#bartonplus .hidden-fields").append("<input name='direct' value='true' type='hidden'>").append("<input name='scope' value='site' type='hidden'>").append("<input name='site' value='eds-live' type='hidden'>").append("<input name='authtype' value='ip,guest' type='hidden'>").append("<input name='custid' value='s8978330' type='hidden'>").append("<input name='profile' value='eds' type='hidden'>").append("<input name='groupid' value='main' type='hidden'>").append('<input name="bquery" value="" type="hidden">'),$("#vera.active").length&&($("#vera .hidden-fields").append("<input type='hidden' name='param_perform_save' value='searchTitle' />").append("<input type='hidden' name='param_chinese_checkbox_save' value='0' />").append("<input type='hidden' name='param_type_save' value='textSearch' />").append("<input type='hidden' name='param_type_value' value='textSearch' />").append("<input type='hidden' name='param_jumpToPage_value' value='' />").append("<input type='hidden' name='param_services2filter_save' value='getAbstract' />").append("<input type='hidden' name='param_services2filter_save' value='getFullTxt' />"),"contains"==a&&$("#vera").append('<input type="radio" name="param_textSearchType_value" id="contains" value="contains" checked="checked" class="radio" />'),"startsWith"==a&&$("#vera").append('<input type="radio" name="param_textSearchType_value" id="startsWith" value="startsWith" class="radio" checked="checked" />'),"exactMatch"==a&&$("#vera").append('<input type="radio" name="param_textSearchType_value" id="exactMatch" value="exactMatch" class="radio" checked="checked" />')),$("#barton.active").length&&($("#barton").append("<input type='hidden' name='func' value='scan'/>"),"find_WRD"==a&&$("#barton").append('<input type="radio" name="code" id="bartonkeyword" value="find_WRD" checked="checked" class="radio" />'),"scan_TTL"==a&&$("#barton").append('<input type="radio" name="code" id="bartontitle" value="scan_TTL" class="radio" checked="checked" />'),"scan_AUT"==a&&$("#barton").append('<input type="radio" name="code" id="bartonauthor" value="scan_AUT" class="radio" checked="checked" />'),"scan_CND"==a&&$("#barton").append('<input type="radio" name="code" id="bartoncallnumber" value="scan_CND" class="radio" checked="checked" />')),$("#worldcat.active").length&&$("#worldcat .hidden-fields").append("<input type='hidden' name='qt' value='wc_org_mit'/>").append("<input type='hidden' name='qt' value='affiliate'/>"),$("#course-reserves.active").length&&($("#course-reserves .hidden-fields").append("<input type='hidden' name='func' value=''/>"),"scan_CNB"==a&&$("#course-reserves").append('<input name="code" id="coursenumber" value="scan_CNB" checked="checked" type="radio" class="radio" />'),"find_WIN"==a&&$("#course-reserves").append('<input name="code" id="instructorkeyword" value="find_WIN" type="radio" class="radio" checked="checked" />'),"find_WOU"==a&&$("#course-reserves").append('<input name="code" id="coursenamekeyword" value="find_WOU" type="radio" class="radio" checked="checked" />')),$("#site-search.active").length&&$("#site-search .hidden-fields").append('<input type="hidden" name="cx" value="016240528703941589557:i7wrbu9cdxu" />').append('<input type="hidden" name="ie" value="UTF-8" />')}$("#resources").on("click","li",function(){var a=$("#resources li");if(!$(this).hasClass("has-link")){$(this).parent().toggleClass("active"),$(a).removeClass("active"),$(this).toggleClass("active");var b=$("#resources li.active .main").text();$("#resources").hasClass("active")?$(".wrap-select--resources .selected").text(b).append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="8.071px" height="14px" viewBox="0 0 8.071 14" enable-background="new 0 0 8.071 14" xml:space="preserve" class="select-arrows"><path d="M0.069 8.74c0.08-0.159 0.252-0.264 0.436-0.274 0.023 0 1.743-0.104 3.531-0.104s3.508 0.104 3.53 0.104C7.751 8.476 7.911 8.581 8.003 8.74c0.092 0.161 0.092 0.356 0 0.517 -1.364 2.431-3.508 4.517-3.6 4.598 -0.206 0.194-0.528 0.194-0.734 0 -0.091-0.081-2.235-2.167-3.6-4.598C-0.023 9.096-0.023 8.901 0.069 8.74M8.003 5.259c-0.08 0.16-0.252 0.264-0.437 0.275 -0.022 0-1.742 0.103-3.53 0.103S0.528 5.535 0.505 5.535C0.321 5.523 0.161 5.419 0.069 5.259c-0.092-0.161-0.092-0.355 0-0.516 1.365-2.431 3.508-4.517 3.6-4.598 0.206-0.194 0.528-0.194 0.734 0 0.092 0.081 2.235 2.167 3.6 4.598C8.095 4.904 8.095 5.099 8.003 5.259"></path></svg>').addClass("active"):($(".wrap-select--resources .selected").text("").removeClass("active"),$("#search-main input").val(""),$(this).trigger("search-change"))}}),$(document).on("click",function(a){0!=!$("#resources.active").has(a.target).length&&($("#resources").removeClass("active"),$("#search-main .selected").removeClass("active").text(""))}),a(),b(),$("#search-main").on("click","#resources",function(){$("#search-main form").removeClass("input-submit active"),$("#search-main input").removeClass("active");var a=$("#resources li.active").attr("data-option");$("#search-main input."+a).parent().addClass("active input-submit"),$("#search-main input."+a).addClass("active"),$(".keywords").parent().removeClass("active"),$(".keywords").removeClass("active"),$("#search-main .keywords."+a).addClass("active"),$("#search-main .keywords."+a).parent().addClass("active"),$(this).trigger("option-change");var b=$("#resources li.active").attr("data-target");$("#search-main a.search-advanced").removeClass("active"),$("#search-main a.search-advanced."+b).addClass("active")}),$("#search-main").on("option-change",function(){b(),a()}),$("#search-main form").on("submit",function(){$('#search-main input[type="hidden"], #search-main input[type="radio"]').remove();var a=$("input.active",this).val();if(""==a)return alert("Please enter a search term."),!1;var b=$("#search-main select.active").val();if($("#bartonplus.active").length&&($("#bartonplus").attr("action","http://search.ebscohost.com/login.aspx").attr("method","get").attr("target","_top"),c(),$('input[name="bquery"]',this).val((b+a).replace(/"/g,"&quot;"))),$("#vera.active").length&&($("#vera").attr("action","http://owens.mit.edu/sfx_local/az/mit_all").attr("name","az_user_form").attr("method","get").attr("accept-charset","UTF-8").addClass("searchform"),c(),$("input.active",this).attr("name","param_pattern_value").attr("id","param_pattern_value").addClass("searchtext").val(a)),$("#barton.active").length){var d=b.split("_");$("#barton").addClass("searchform").attr("action","http://library.mit.edu/F/").attr("name","booksearch").attr("method","get"),c(),$("input.active",this).attr("name","request").attr("type","text").attr("id","bookrequest").val(a),$('#barton input[name = "code"]:checked').val(d[1]),"find"==d[0]||"F8"==d[0]?($("#barton .hidden-fields").append("<input type='hidden' name='func' value='find-b'/>"),$("#barton input[name = 'code']").attr("name","find_code")):($("#barton .hidden-fields").append("<input type='hidden' name='func' value='scan'/>"),$("#barton input[name = 'code']").attr("name","scan_code"),$("#barton input.searchtext").attr("name","scan_start"))}if($("#worldcat.active").length){if($(this).attr("action","http://mit.worldcat.org/search"),c(),$("input.active",this).attr("method","get"),"keyword"==b&&$("input.active",this).attr("name","q").val(a),"author"==b){var a="au:"+$("input.active",this).val();$("#worldcat.active").append('<input type="hidden" name="q" value="'+a+'" />')}if("title"==b){var a="ti:"+$("input.active",this).val();$("#worldcat.active").append('<input type="hidden" name="q" value="'+a+'" />')}}if($("#course-reserves.active").length){$("#course-reserves").addClass("searchform").addClass("barton").attr("action","http://library.mit.edu/F/").attr("method","get").attr("name","getInfo"),$("input.active",this).attr("name","request").val(a),c();var d=b.split("_");$("#course-reserves input[name = 'code']:checked").val(d[1]),$("#course-reserves .hidden-fields").append("<input type='hidden' name='local_base' value='u-mit30'/>"),"find"==d[0]?($("#course-reserves .hidden-fields input[name = 'func']").val("find-b"),$("#course-reserves input[name = 'code']").attr("name","find_code")):($("#course-reserves .hidden-fields input[name = 'func']").val("scan"),$("#course-reserves input[name = 'code']").attr("name","scan_code"),$("#course-reserves input[name = 'request']").attr("name","scan_start"))}$("#site-search.active").length&&($(this).attr("action","http://www.google.com/cse"),c(),$("input.active",this).attr("name","q").val(a),$("button",this).attr("name","sa").attr("value","Search"))})}),$(function(){oldIESearch()}),$(document).ready(function(){InitAnalytics()});